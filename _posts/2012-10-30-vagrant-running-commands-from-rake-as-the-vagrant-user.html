---
layout: post
title: ! 'Vagrant: Run commands from Rake as the vagrant user'
tags:
- Software Craftmanship
status: publish
type: post
published: true
meta: {}
---
<img src="http://static.squarespace.com/static/4ff4f78ac4aaf05888ec4716/4ff4f78ac4aaf05888ec4725/50902e81e4b08a6452e1e19e/1351626371048/Screen%20Shot%202012-10-30%20at%203.45.40%20PM.png.40%20PM.png?format=original" /><p>I was trying to find out a way of running some commands inside the Vagrant virtual machine as the <em>vagrant</em> user, not as <em>root</em>, which is what the <em>channel.sudo()</em> method does.&nbsp;</p><p>After a while of trying to find some documentation on the official Vagrant site, and finding none, I eventually found a call in the Vagrant source code for <em>channel.execute()</em> - which does run the passed commands as the&nbsp;<em>vagrant</em> user.</p><p>Job done, right?</p><p>Well, not really. I did what all good citizens of the open source community should do, which was to fork the Vagrant documentation repo, update the documentation, and <a href="https://github.com/mitchellh/vagrant/pull/1214" target="_blank">submit a pull request</a>. </p><p>The 'Boy Scout' principal prevails - try to leave the campsite tidier than when you found it. </p>
